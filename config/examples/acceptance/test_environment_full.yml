# Full test environment configuration
# Used in comprehensive acceptance tests for production-like deployment

name: acceptance-test-full
description: Full test environment with all components

# Global settings
region: us-east-1
tags:
  environment: test
  purpose: acceptance-testing-full
  managed_by: quants-infra

# Infrastructure - Multiple instances
infrastructure:
  instances:
    - name: acceptance-test-dc-1
      blueprint: ubuntu_22_04
      bundle: nano_3_0
      static_ip: true
      tags:
        role: data-collector
        tier: core
    
    - name: acceptance-test-monitor-1
      blueprint: ubuntu_22_04
      bundle: nano_3_0
      static_ip: false
      tags:
        role: monitor
        tier: management

# Security configuration
security:
  instances:
    - acceptance-test-dc-1
    - acceptance-test-monitor-1
  ssh:
    port: 22
    key_path: ~/.ssh/lightsail_key.pem
    user: ubuntu
  vpn_network: 10.0.0.0/24

# Services
services:
  # Data Collector
  - type: data-collector
    target: acceptance-test-dc-1
    config:
      exchange: gateio
      pairs:
        - BTC-USDT
        - ETH-USDT
      vpn_ip: 10.0.0.2
      monitor_vpn_ip: 10.0.0.1
      metrics_port: 8000
      skip_monitoring: false
      skip_security: true  # Already configured via security section
  
  # Monitor
  - type: monitor
    target: acceptance-test-monitor-1
    config:
      grafana_password: ${GRAFANA_PASSWORD:test_password_123}
      skip_security: true  # Already configured via security section

